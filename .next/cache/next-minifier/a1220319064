{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{RNiq:function(e,t,n){\"use strict\";n.r(t);var o=n(\"1OyB\"),a=n(\"vuIU\"),r=n(\"JX7q\"),s=n(\"Ji7U\"),c=n(\"md7G\"),i=n(\"foSv\"),l=n(\"rePB\"),u=n(\"q1tI\"),d=n.n(u),f=n(\"nOHt\"),g=n.n(f),m=n(\"X4ED\"),h=n(\"vDqi\"),_=n.n(h),p=n(\"/MKj\"),v=n(\"bn5U\"),b=n.n(v),y=d.a.createElement;function k(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var I=[{title:\"Stream your music with Soundify\",subtitle:\"A third party client for spotify\",slogan:\"Get Started\",href:\"http://localhost:3000/login\"},{title:\"Proudly made with Next.js\",subtitle:\"A server-side-render React framework\",slogan:\"Next.js\",href:\"https://nextjs.org/\"},{title:\"Amazing tool from Troye Guo\",subtitle:\"Looking for a good job\",slogan:\"About Me\",href:\"http://102410.xyz\"}],x=function(e){Object(s.a)(u,e);var t,n=(t=u,function(){var e,n=Object(i.a)(t);if(k()){var o=Object(i.a)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function u(){var e;Object(o.a)(this,u);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return e=n.call.apply(n,[this].concat(a)),Object(l.a)(Object(r.a)(e),\"state\",{currentIndex:0}),Object(l.a)(Object(r.a)(e),\"handleClick\",(function(t){e.setState({currentIndex:t})})),Object(l.a)(Object(r.a)(e),\"mouseFirefox\",(function(t){return t.preventDefault(),t.detail<0&&e.state.currentIndex>0?(e.setState({currentIndex:e.state.currentIndex-1}),!1):t.detail>0&&e.state.currentIndex<2?(e.setState({currentIndex:e.state.currentIndex+1}),!1):void 0})),Object(l.a)(Object(r.a)(e),\"mouseChrome\",(function(t){return t.preventDefault(),t.wheelDelta>0&&e.state.currentIndex>0?(e.setState({currentIndex:e.state.currentIndex-1}),!1):t.wheelDelta<0&&e.state.currentIndex<2?(e.setState({currentIndex:e.state.currentIndex+1}),!1):void 0})),e}return Object(a.a)(u,[{key:\"componentDidMount\",value:function(){var e=-1!==navigator.userAgent.indexOf(\"Firefox\"),t=document;e?t.addEventListener(\"DOMMouseScroll\",this.mouseFirefox,!1):t.addEventListener(\"mousewheel\",this.mouseChrome,!1)}},{key:\"render\",value:function(){var e=this,t=function(e){return y(\"div\",null,y(\"div\",{className:b.a.subtitle},I[e].subtitle),y(\"div\",{className:b.a.title},I[e].title),y(\"a\",{href:I[e].href},y(\"div\",{className:b.a.button},y(\"div\",null,I[e].slogan))))};return y(\"div\",{className:b.a.root},y(\"div\",{className:b.a.infoContainer},0===this.state.currentIndex?y(\"div\",{className:b.a.firstScreen},t(0)):null,1===this.state.currentIndex?y(\"div\",{className:b.a.secondScreen},t(1)):null,2===this.state.currentIndex?y(\"div\",{className:b.a.thirdScreen},t(2)):null,y(\"div\",{className:b.a.dotContainer},[0,1,2].map((function(t,n){return y(\"div\",{key:t,onClick:function(){e.setState({currentIndex:t})},className:b.a.dot,style:e.state.currentIndex===n?{opacity:1}:{}})})))),y(\"div\",{className:b.a.image,style:1===this.state.currentIndex?{backgroundColor:\"#E5E2DD\"}:2===this.state.currentIndex?{backgroundColor:\"#EAE9E5\"}:{}},y(\"div\",{className:b.a.logo},y(\"div\",null,y(\"img\",{className:b.a.logoImg,src:\"/icons/dark-logo.svg\",alt:\"\"}),y(\"span\",{className:b.a.logoText},\"Soundify\"))),y(\"div\",{className:b.a.imageContainer},0===this.state.currentIndex?y(\"img\",{src:\"/images/bg0.png\",alt:\"\",className:b.a.bg0}):null,1===this.state.currentIndex?y(\"img\",{src:\"/images/bg1.png\",alt:\"\",className:b.a.bg1}):null,2===this.state.currentIndex?y(\"img\",{src:\"/images/bg2.jpg\",alt:\"\",className:b.a.bg2}):null)))}}]),u}(u.Component),S=d.a.createElement;function j(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var O=function(e){Object(s.a)(u,e);var t,n=(t=u,function(){var e,n=Object(i.a)(t);if(j()){var o=Object(i.a)(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return Object(c.a)(this,e)});function u(e){var t;return Object(o.a)(this,u),t=n.call(this,e),Object(l.a)(Object(r.a)(t),\"logInUserAndGetInfo\",(function(e){console.log(\"LOG IN\",e),localStorage.setItem(\"newUser\",JSON.stringify(e)),t.props.setUser(e),console.log(\"test\"),g.a.push(\"/Home\")})),t.state={token:null},t.token=null,t}return Object(a.a)(u,[{key:\"componentDidMount\",value:function(){var e=this;this.setState({token:localStorage.getItem(\"react-spotify-access-token\")},(function(){void 0!==e.state.token&&\"undefined\"!==e.state.token&&e.state.token&&g.a.push(\"/Home\")}));var t=this.getHashParams();if(\"undefined\"===t.access_token){var n=localStorage.getItem(\"react-spotify-access-token\");n&&(t.access_token=n)}t.access_token&&void 0!==t.access_token&&\"undefined\"!==t.access_token?(localStorage.setItem(\"react-spotify-access-token\",t.access_token),_.a.get(\"https://api.spotify.com/v1/me\",{headers:{Authorization:\"Bearer \".concat(t.access_token)}}).then((function(n){var o=n.data;console.log(o,\"data\"),t.refresh_token&&localStorage.setItem(\"react-spotify-refresh-token\",t.refresh_token);var a={access_token:t.access_token,displayName:o.display_name,email:o.email,type:o.type,country:o.country,product:o.product,avatar:o.images[0].url};console.log(a,\"newUser\"),e.logInUserAndGetInfo(a)})).catch((function(n){if(console.log(n,\"fgjxfjxf\"),n||401===n.response.status){var o=localStorage.getItem(\"react-spotify-refresh-token\");o?_.a.post(\"http://localhost:3000/refresh\",{data:JSON.stringify({refresh_token:o})}).then((function(n){console.log(\"Refresh token response -\",n.data),_.a.get(\"https://api.spotify.com/v1/me\",{headers:{Authorization:\"Bearer \".concat(n.data.access_token)}}).then((function(o){var a=o.data;localStorage.setItem(\"react-spotify-access-token\",n.data.access_token);var r={access_token:t.access_token,displayName:a.display_name,email:a.email,type:a.type,country:a.country,product:a.product,avatar:a.images[0].url};e.logInUserAndGetInfo(r)}))})).catch((function(e){console.log(\"Refresh token error -\",e)})).finally((function(){e.setState({loading:!1})})):e.setState({loading:!1})}}))):this.setState({loading:!1})}},{key:\"getHashParams\",value:function(){for(var e,t={},n=/([^&;=]+)=?([^&;]*)/g,o=window.location.hash.substring(1);e=n.exec(o);)t[e[1]]=decodeURIComponent(e[2]);return console.log(t,\"hashParams\"),t}},{key:\"render\",value:function(){return S(x,null)}}]),u}(u.Component);t.default=Object(p.b)((function(e){return{user:e.current_user,backgroundImage:e.backgroundImage}}),(function(e){return{setUser:function(t){return e({type:m.h,user:t})}}}))(Object(f.withRouter)(O))},bn5U:function(e,t,n){e.exports={root:\"login_root__1rfeA\",image:\"login_image__32u7y\",imageContainer:\"login_imageContainer__2oscp\",bg0:\"login_bg0__3DioX\",slidein:\"login_slidein__13FjV\",bg1:\"login_bg1__1mqFn\",bg2:\"login_bg2__1yoUJ\",logo:\"login_logo__1B3-D\",logoImg:\"login_logoImg__2o297\",logoText:\"login_logoText__1cENq\",infoContainer:\"login_infoContainer__28lcv\",firstScreen:\"login_firstScreen__ovEFe\",secondScreen:\"login_secondScreen__rS1ge\",thirdScreen:\"login_thirdScreen__Mmef2\",subtitle:\"login_subtitle__2x7cx\",fadein:\"login_fadein__MOhak\",title:\"login_title__2w2-U\",button:\"login_button__3XC2R\",dotContainer:\"login_dotContainer__3UYYX\",dot:\"login_dot__3lbZK\"}},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/\",function(){return n(\"RNiq\")}])}},[[\"vlRD\",1,2,0,3,5]]]);"}