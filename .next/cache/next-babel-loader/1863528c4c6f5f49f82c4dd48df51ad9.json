{"ast":null,"code":"// From:\n// https://github.com/zeit/next.js/blob/canary/examples/with-firebase-authentication/pages/index.js\nimport fetch from \"isomorphic-unfetch\";\nexport var setSession = function setSession(user) {\n  // Log in.\n  if (user) {\n    return user.getIdToken().then(function (token) {\n      return fetch(\"/api/login\", {\n        method: \"POST\",\n        // eslint-disable-next-line no-undef\n        headers: new Headers({\n          \"Content-Type\": \"application/json\"\n        }, \"Set-Cookie: HttpOnly; SameSite=None;Secure\"),\n        credentials: \"same-origin\",\n        body: JSON.stringify({\n          token: token\n        })\n      });\n    });\n  } // Log out.\n\n\n  return fetch(\"/api/logout\", {\n    method: \"POST\",\n    credentials: \"same-origin\"\n  });\n};","map":{"version":3,"sources":["D:/1-Project/soundify-web/utils/auth/firebaseSessionHandler.js"],"names":["fetch","setSession","user","getIdToken","then","token","method","headers","Headers","credentials","body","JSON","stringify"],"mappings":"AAAA;AACA;AAEA,OAAOA,KAAP,MAAkB,oBAAlB;AAEA,OAAO,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAACC,IAAD,EAAU;AAClC;AACA,MAAIA,IAAJ,EAAU;AACR,WAAOA,IAAI,CAACC,UAAL,GAAkBC,IAAlB,CAAuB,UAACC,KAAD,EAAW;AACvC,aAAOL,KAAK,CAAC,YAAD,EAAe;AACzBM,QAAAA,MAAM,EAAE,MADiB;AAEzB;AACAC,QAAAA,OAAO,EAAE,IAAIC,OAAJ,CACP;AAAE,0BAAgB;AAAlB,SADO,EAEP,4CAFO,CAHgB;AAOzBC,QAAAA,WAAW,EAAE,aAPY;AAQzBC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEP,UAAAA,KAAK,EAALA;AAAF,SAAf;AARmB,OAAf,CAAZ;AAUD,KAXM,CAAP;AAYD,GAfiC,CAiBlC;;;AACA,SAAOL,KAAK,CAAC,aAAD,EAAgB;AAC1BM,IAAAA,MAAM,EAAE,MADkB;AAE1BG,IAAAA,WAAW,EAAE;AAFa,GAAhB,CAAZ;AAID,CAtBM","sourcesContent":["// From:\n// https://github.com/zeit/next.js/blob/canary/examples/with-firebase-authentication/pages/index.js\n\nimport fetch from \"isomorphic-unfetch\";\n\nexport const setSession = (user) => {\n  // Log in.\n  if (user) {\n    return user.getIdToken().then((token) => {\n      return fetch(\"/api/login\", {\n        method: \"POST\",\n        // eslint-disable-next-line no-undef\n        headers: new Headers(\n          { \"Content-Type\": \"application/json\" },\n          \"Set-Cookie: HttpOnly; SameSite=None;Secure\"\n        ),\n        credentials: \"same-origin\",\n        body: JSON.stringify({ token }),\n      });\n    });\n  }\n\n  // Log out.\n  return fetch(\"/api/logout\", {\n    method: \"POST\",\n    credentials: \"same-origin\",\n  });\n};\n"]},"metadata":{},"sourceType":"module"}