{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport getConfig from \"next/config\";\nimport Router, { withRouter } from \"next/router\";\nimport { useSelector } from \"react-redux\";\nimport { request } from \"../lib/api\";\nimport initCache from \"../lib/clientCache\";\nimport Content from \"../components/Content\";\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar _initCache = initCache(),\n    cache = _initCache.cache,\n    useCache = _initCache.useCache;\n\nvar Index = function Index(_ref) {\n  var userRepos = _ref.userRepos,\n      starred = _ref.starred,\n      router = _ref.router;\n  var user = useSelector(function (store) {\n    return store.user;\n  });\n  var tabKey = router.query.key || \"1\";\n  useCache(\"cache\", {\n    userRepos: userRepos,\n    starred: starred\n  });\n\n  if (!user || !user.id) {\n    // console.log(\"fase\");\n    return __jsx(\"div\", {\n      className: \"root\",\n      style: {\n        position: \"absolute\",\n        left: 200,\n        top: 100\n      }\n    }, __jsx(\"p\", null, \"\\u4EB2\\uFF0C\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\\u54E6\"), __jsx(\"a\", {\n      href: publicRuntimeConfig.OAUTH_URL\n    }, \"\\u70B9\\u51FB\\u767B\\u5F55\"));\n  } // const { avatar_url, login, name, bio, email } = user;\n\n\n  return __jsx(Content, null);\n};\n\nIndex.getInitialProps = cache(function _callee(_ref2) {\n  var ctx, reduxStore, _reduxStore$getState, user;\n\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore;\n          // 判断用户是否登出;\n          _reduxStore$getState = reduxStore.getState(), user = _reduxStore$getState.user;\n\n          if (!(!user || !user.id)) {\n            _context.next = 4;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {});\n\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n});\nexport default withRouter(Index);","map":null,"metadata":{},"sourceType":"module"}